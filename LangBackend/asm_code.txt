CALL main
HLT
Factorial:

; the next operator has gone from 2 line
PUSH [0]
OUT

; the next operator has gone from 3 line
PUSH 1.000000
PUSH [0]
JE cond_1
PUSH 0
JMP end_cond2
cond_1:
PUSH 1
end_cond2:
PUSH 0
JE end_if_3

; the next operator has gone from 4 line
PUSH 1.000000
POP RAX
RET
end_if_3:

; the next operator has gone from 7 line
PUSH [0]
PUSH [0] ; saving 0 arg
PUSH [1] ; saving 1 arg
PUSH [0]
PUSH 1.000000
SUB

POP [0]
CALL Factorial
POP [1]; getting old 1 arg
POP [0]; getting old 0 arg
PUSH RAX
MUL
POP [1]

; the next operator has gone from 8 line
PUSH [0]
OUT

; the next operator has gone from 10 line
PUSH [1]
POP RAX
RET
main:

; the next operator has gone from 14 line
PUSH 3.000000

POP [0]
CALL Factorial
PUSH RAX
OUT

; the next operator has gone from 15 line
PUSH 0.000000
POP RAX
RET
